
@{
    ViewData["Title"] = "Step3";
    Layout = "~/Views/Shared/_AccountLayout.cshtml";
}

<form id="formfile" befoys-url="/api/Step/Step3" befoys-method="POST" befoys-OnSuccess="OnSuccess" befoys-OnBefore="OnBefore">
    <br />

    <input type="file" name="files" id="file1" />
    <br />
    <input type="file" name="files"  id="file2" />
    <br />
    <input type="file" name="files"  id="file3" />
    <br />
    <button type="submit" id="btnUpload">ثبت</button>
</form>
<script>
    $("#btnUpload").click(function (e) {
        e.preventDefault();
        var $form = $("#formfile");
        var url = BaseUrl + $form.attr("befoys-url");
        var method = $form.attr("befoys-method");
        var onSuccess = $form.attr("befoys-OnSuccess");


        var fd = new FormData();
                var file1 = $('#file1')[0].files[0];
        var file2 = $('#file2')[0].files[0];
        var file3 = $('#file3')[0].files[0];
        fd.append('files', file1);
        fd.append('files', file2);
        fd.append('files', file3);
        $.ajax({
            url: url,
            method: method,
            data: fd,
              processData: false,
            contentType: false,
            cache: false,
            timeout: 600000,
            //contentType: "application/json",
            headers: { "Authorization": "Bearer " + getCookie("token") },


        }).done(function (response) {
            OnSuccess(response);
        });
    });
</script>
